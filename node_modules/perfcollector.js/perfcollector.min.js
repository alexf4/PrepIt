!function(){"use strict";var t,e=this;t="undefined"!=typeof exports?exports:e.PerfCollector={};var s=e.performance||{};s.now=e.process&&e.process.hrtime?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return s.now||s.mozNow||s.msNow||s.oNow||s.webkitNow||function(){return(new Date).getTime()}}();var a=function(){this.enabled=!1,this.stats={},this._timersByName={}};a.prototype.enable=function(t){return t!==!1&&(t=!0),this.enabled=t,this},a.prototype.disable=function(){return this.enabled=!1,this};var o=function(t){return this.startDate=t||s.now(),this},n=function(t,e){return this.klass.end(this,t,e),this},r=function(){return this.klass.stats[this.name]||{calls:0,totalMs:0,averageMs:0,maxMs:0,lastMs:0}},i=function(){var t=r.call(this);return t&&console.log(this.name+": "+t.calls+" calls, total: "+t.totalMs+"ms, avg:"+t.averageMs+"ms, max:"+t.maxMs+"ms"),this};return a.prototype.start=a.prototype.timer=function(t,e){var a={};return this.enabled&&("string"==typeof t&&(e=t,t=void 0),e&&(this._timersByName[e]||(console.profile&&console.profile(e),this._timersByName[e]=a)),a.startDate=t||s.now()),a.klass=this,a.name=e,a.end=n,a.stats=r,a.logToConsole=i,a.start=o,a},a.prototype.end=function(t,e,a){if(this.enabled)if("string"==typeof t&&(a=t,t=this._timersByName[t]),t&&"undefined"!=typeof t.startDate){"string"==typeof e&&(a=e,e=void 0);var o=e||s.now(),n=o-t.startDate,r=t.name;if(r&&(this._timersByName[r]&&(delete this._timersByName[r],console.profile&&console.profileEnd(r)),a||(a=r)),"undefined"!=typeof this.stats[a]){var i=this.stats[a];i.calls+=1,i.totalMs+=n,n>i.maxMs&&(i.maxMs=n),i.averageMs=i.totalMs/i.calls,i.lastMs=n}else this.stats[a]={calls:1,totalMs:n,maxMs:n,averageMs:n,lastMs:n};t.startDate=void 0,t.name=a}else t?console.warn("PerfCollector: Timer already ended"):console.warn("PerfCollector: Invalid timer");return this},a.prototype.logToConsole=function(){for(var t in this.stats){var e=this.stats[t];console.log(" - "+t+": "+e.calls+" calls, total: "+e.totalMs+"ms, avg:"+e.averageMs+"ms, max:"+e.maxMs+"ms")}},t.VERSION="0.8.0",t.create=function(){return new a},t.now=function(){return s.now()},t}.call(this);